# 제어 시스템의 목표와 성능 분석

## 1. 제어의 기본 개념

### 1.1 제어(Control)의 정의

제어란 원하는 결과를 만들어내는 것, 즉 Response가 Reference를 따라가도록 만드는 과정을 의미합니다. 예를 들어, 자동차가 우리의 의도대로 특정 속도(예: 65km/h)로 움직이도록 하는 것이 제어의 한 예입니다.

```
[Reference] → [Controller] → [Plant] → [Response]
    65km/h      기준값을      자동차      64km/h
                신호로           (우리에게    66km/h
                바꾸는 장치     주어진 것)     ...
```

### 1.2 Controller의 역할

Controller는 기준 입력(Reference)이 Plant에 적용되기 전에 신호를 수정하는 역할을 합니다. Plant는 우리에게 주어진 것으로 직접 변경할 수 없으므로, Controller를 이용하여 Plant를 기준 입력에 맞게 동작시키거나 원하지 않는 동작 특성을 제거하고 바람직한 동작 특성으로 바꾸는 것이 제어의 목적입니다.

## 2. 제어 시스템의 구조

### 2.1 개루프 시스템(Open-Loop System)

개루프 시스템은 출력을 피드백하지 않고 입력만으로 제어하는 시스템입니다.

```
       [Controller]     [Plant]
R(s) → [    D(s)   ] → [  G(s)  ] → Y(s)
          ↑
          W(s)
```

개루프 시스템에서 출력과 오차는 다음과 같이 표현됩니다:

1. **출력**: 
   ```
   Y = G(U+W) = G(RD+W) = GD·R + GW
   ```
   여기서 GW항은 Controller가 없어서 외란에 대해 속수무책이며, R-term은 D가 있어 Control이 가능합니다.

2. **오차**: 
   ```
   E = R - Y = R - (GD·R + GW) = (1 - GD)R - GW
   ```
   우리가 원하는 것은 Y = R, 즉 E = 0입니다. R-term을 보면, D를 잘 만들면 0으로 만들 수 있지만, W-term은 Controller로 조절할 수 없어 출력에 외란이 그대로 반영됩니다.

3. **외란이 없을 때 전달함수**: 
   ```
   T = GD
   ```

따라서 외란이 없는 경우, Plant G를 Controller D로 조정하여 제어 목적을 달성할 수 있으나, 외란이 존재하는 경우에는 출력과 오차에 Controller로 조절할 수 없는 항이 생기게 됩니다.

### 2.2 폐루프 시스템(Closed-Loop System)

폐루프 시스템은 출력을 측정하여 피드백하는 시스템입니다.

```
       [Controller]     [Plant]
R(s) → [+] → [D(s)] → [G(s)] → Y(s)
        ↑                 |
        |                 |
        +------ [-] ←-----+
               ↑
               V(s)
```

폐루프 시스템에서 출력과 오차는 다음과 같이 표현됩니다:

1. **출력**: 
   ```
   Y = G(W+U) = G(W + D(R - (Y+V)))
     = GW + GD·R - GD·Y - GD·V
   ```
   
   이를 Y에 대해 정리하면:
   ```
   (1+GD)Y = GD·R + GW - GD·V
   Y = (GD/(1+GD))·R + (G/(1+GD))·W - (GD/(1+GD))·V
   ```

2. **오차**: 
   ```
   E = R - Y = R - ((GD/(1+GD))·R + (G/(1+GD))·W - (GD/(1+GD))·V)
     = (1/(1+GD))·R - (G/(1+GD))·W + (GD/(1+GD))·V
   ```

3. **외란과 센서 노이즈가 없을 때 전달함수**: 
   ```
   T = GD/(1+GD)
   ```

폐루프 시스템에서는 모든 항에 Controller D가 영향을 줄 수 있어 원하는 대로 제어가 가능합니다.

### 2.3 Controller의 출력(제어 신호)

Controller의 출력(U)은 전체 시스템에서 우리가 조절할 수 있는 유일한 부분입니다:

```
U = D(R - (Y+V))
  = D(R - (G(U+W) + V))
  = D·R - D·G·U - D·G·W - D·V
```

이를 U에 대해 정리하면:
```
(1+DG)U = D·R - D·G·W - D·V
U = (D/(1+DG))·R - (DG/(1+DG))·W - (D/(1+DG))·V
```

## 3. 제어 목표(Control Objectives)

제어 시스템의 주요 목표는 다음과 같습니다:

### 3.1 안정도(Stability)

안정도는 전달함수의 모든 극점이 좌반면(LHP)에 존재하는 특성입니다.

#### 개루프 시스템에서의 안정도

개루프 시스템의 전달함수는 다음과 같습니다:
```
T(s) = G(s)D(s) = (b(s)d(s))/(a(s)c(s))
```

**질문**: Plant의 극점이 우반면(RHP)에 존재하면, Controller로 극점을 소거하여 안정하게 제어 가능한가?

**답**: 불가능합니다. 

예를 들어:
```
G(s) = 1/(s-2), D(s) = (s-2)/((s+2)(s+4))
T(s) = G(s)D(s) = 1/((s+2)(s+4))
```
위 예에서는 안정해 보이지만, 실제로는 Plant가 외부 환경에 의해 바뀔 수 있습니다:

```
G₁(s) = 1/(s-2.001)
T₀₁(s) = (s-2)/((s-2.001)(s+2)(s+4))
```
이 경우 시스템은 불안정합니다.

따라서, 개루프 시스템은 불안정한 Plant를 안정하게 만들 수 없습니다.

#### 폐루프 시스템에서의 안정도

폐루프 시스템의 전달함수는 다음과 같습니다:
```
T(s) = G(s)D(s)/(1 + G(s)D(s)) = (b(s)d(s))/(a(s)c(s) + b(s)d(s))
```

개루프 시스템과 달리, 폐루프 시스템에서는 Plant의 우반면 극점을 직접 소거할 필요가 없습니다. 특성방정식 계수를 Routh array를 사용하여 조정하는 방식으로 안정성을 확보할 수 있습니다.

### 3.2 추적성(Tracking)

추적성은 출력이 가능한 기준 입력과 가깝게 추적할 수 있도록 하는 특성입니다.

Plant가 안정(우반면에 극점이나 영점이 없음)하면 이론적으로 Controller는 Plant의 전달함수를 상쇄하고 원하는 전달함수를 가질 수 있도록 설계할 수 있습니다. 그러나 실제 설계에서는 다음 세 가지 규칙을 지켜야 합니다:

1. 물리적으로 Controller는 영점(Zero)이 극점(Pole)보다 많을 수 없습니다.
2. Plant의 한계(너무 빠른 설계)를 인지하고 전달함수가 적절한 값을 가지도록 해야 합니다.
3. Plant의 전달함수는 바뀔 수 있습니다(불확실성 고려).

### 3.3 조절성(Regulation)

조절성은 외란(disturbance)과 센서 노이즈의 영향을 줄여 오차 E = R-Y를 작게 유지하는 특성입니다.

#### 개루프 시스템에서의 조절성

개루프 시스템에서는 외란(W)과 센서 노이즈(V)에 대해 Controller D(s)가 아무런 제어를 할 수 없어 응답(Y)에 영향을 주지 못합니다. 따라서 조절성이 확보되지 않습니다.

#### 폐루프 시스템에서의 조절성

폐루프 시스템에서의 오차 방정식:
```
E = (1/(1+GD))·R - (G/(1+GD))·W + (GD/(1+GD))·V
```

여기서 D가 클수록 W-term은, D가 작을수록 V-term은 0에 가까워집니다. 이는 모순된 요구사항처럼 보이지만, 실제 시스템에서는 다음 특성을 활용할 수 있습니다:

대부분의 Plant 외란(W)은 저주파에서, 센서 노이즈(V)는 고주파에서 발생하므로, Controller의 전달함수를 저주파 영역에서는 크게 하여 W의 영향을 줄이고, 고주파 영역에서는 작게 하여 V의 영향을 줄이는 방식으로 설계할 수 있습니다.

### 3.4 민감도(Sensitivity)

민감도는 Plant가 불안정하고 시간에 따라 변화해도 응답이 기준 입력을 잘 따라가는 특성을 의미합니다.

예를 들어, 플랜트의 게인을 G로 설계했지만 시스템 작동 중 G + δG로 변했다고 가정해 봅시다. 이때 전달함수의 게인이 얼마나 변하는지가 민감도의 관심사입니다. 민감도가 낮을수록 좋은 Controller라고 할 수 있습니다.

#### 개루프 시스템에서의 민감도

개루프 시스템에서:
```
T₁ = GD (플랜트가 변하지 않을 때)
T₁ + δT₁ = (G + δG)D = GD + D·δG = T₁ + D·δG (플랜트가 변했을 때)
```

전달함수 게인의 변화율: δT₁/T₁

민감도(Sensitivity):
```
S^T₁_G = (δT₁/T₁) / (δG/G) = (G/T₁)·(δT₁/δG) = (G/T₁)·(D·δG/δG) = (G·D)/T₁ = 1
```

이는 G의 오차가 q% 나면 바로 전달함수(TF)에서도 오차가 q% 난다는 의미입니다.

#### 폐루프 시스템에서의 민감도

폐루프 시스템에서:
```
T₁ = GD/(1+GD) (플랜트가 변하지 않을 때)
T₁ + δT₁ = ((G+δG)D)/(1+(G+δG)D) (플랜트가 변했을 때)
```

전달함수 게인의 변화량을 구하기 위해 T₁을 G에 대해 미분합니다:
```
dT₁/dG = δT₁/δG = (D(1+GD) - GDD) / (1+GD)² = D / (1+GD)²
```

따라서:
```
δT₁ = (D / (1+GD)²) · δG
```

민감도:
```
S^T₁_G = (δT₁/T₁) / (δG/G) = (G/T₁)·(δT₁/δG) = G·(D/(1+GD)²)·(δG/δG) / (GD/(1+GD)) = 1/(1+GD)
```

만약 1+GD = 100이면, Plant gain이 10% 변해도 S = 1/100이므로 TF gain은 0.1%만 변합니다.

## 4. 추가 개념: 시스템 응답 분석

### 4.1 시간 영역 응답 분석

시간 영역에서 시스템 응답을 분석할 때 중요한 특성들:

1. **상승 시간(Rise Time, tr)**: 출력이 최종값의 10%에서 90%까지 도달하는 데 걸리는 시간
2. **정착 시간(Settling Time, ts)**: 출력이 최종값의 ±2% 또는 ±5% 범위 내에 영구적으로 머무르는 시간
3. **최대 오버슈트(Maximum Overshoot, Mp)**: 출력이 최종값을 초과하는 최대값의 비율
4. **상승 시간과 대역폭(Bandwidth)의 관계**: tr ≈ 0.35/BW, 여기서 BW는 시스템의 대역폭

### 4.2 주파수 영역 응답 분석

주파수 영역에서 시스템 응답을 분석하는 방법들:

1. **보드 선도(Bode Plot)**: 주파수에 따른 시스템의 크기와 위상 응답을 표시
2. **나이퀴스트 선도(Nyquist Plot)**: 복소 평면에서 주파수 응답을 표시
3. **이득 여유(Gain Margin)와 위상 여유(Phase Margin)**: 시스템 안정성의 척도

### 4.3 외란 제거 성능 분석

외란 제거 성능을 평가하기 위한 지표들:

1. **외란 감도 함수(Disturbance Sensitivity Function)**: S = 1/(1+GD)
2. **제어 감도 함수(Control Sensitivity Function)**: CS = D/(1+GD)
3. **상보 감도 함수(Complementary Sensitivity Function)**: T = GD/(1+GD)

## 5. 실제 응용 예시

### 5.1 모터 속도 제어 시스템

전기 모터의 속도를 제어하는 시스템을 생각해 봅시다.

```
                  [Controller]    [Motor Plant]
Desired Speed → [+] → [PID] → [Power Driver] → [Motor] → Actual Speed
                 ↑                                 |
                 |                                 |
                 +------------- [Sensor] ←---------+
```

1. **개루프 접근**: 모터에 전압을 직접 인가하는 방식
   - **장점**: 간단한 구현
   - **단점**: 부하 변동이나 모터 특성 변화에 대응 불가

2. **폐루프 접근**: 속도 센서를 통해 실제 속도를 측정하고 피드백
   - **장점**: 부하 변동이나 모터 특성 변화에도 안정적인 속도 유지 가능
   - **단점**: 센서 노이즈의 영향, 시스템 복잡성 증가

3. **PID 제어기 설계**:
   ```
   U(t) = Kp·e(t) + Ki·∫e(t)dt + Kd·de(t)/dt
   ```
   여기서:
   - Kp: 비례 이득 - 현재 오차에 비례하는 제어 동작
   - Ki: 적분 이득 - 과거 오차의 누적에 비례하는 제어 동작
   - Kd: 미분 이득 - 오차의 변화율에 비례하는 제어 동작

4. **성능 향상 방법**:
   - 저주파에서 높은 루프 이득으로 외란 제거 성능 향상
   - 고주파에서 낮은 루프 이득으로 센서 노이즈 영향 감소
   - 적절한 위상 여유 확보로 안정성 보장

### 5.2 항공기 자세 제어 시스템

항공기의 롤(Roll), 피치(Pitch), 요(Yaw) 각도를 제어하는 시스템:

```
                   [Flight Controller]     [Aircraft]
Desired Attitude → [+] → [Controller] → [Actuators] → [Dynamics] → Actual Attitude
                    ↑                                       |
                    |                                       |
                    +----------- [IMU Sensors] ←------------+
```

1. **안정도 중시**: 항공기는 기본적으로 불안정할 수 있으므로 안정화가 최우선
2. **강인성 중시**: 다양한 비행 조건(속도, 고도, 중량 등)에서도 일관된 성능 유지
3. **외란 제거**: 바람과 같은 외부 요인의 영향 최소화

### 5.3 온도 제어 시스템

산업 공정이나 건물의 온도 제어 시스템:

```
                [Temperature Controller]       [Heating/Cooling]
Desired Temp → [+] → [Controller] → [Valves/Switches] → [Process] → Actual Temp
                ↑                                           |
                |                                           |
                +------------ [Temperature Sensor] ←--------+
```

1. **느린 응답 특성**: 온도 변화는 일반적으로 느린 과정
2. **과도한 오버슈트 방지**: 에너지 효율성과 장비 보호를 위해 중요
3. **외란 거부**: 외부 온도 변화나 열 손실에 대한 보상

## 6. 결론

제어 시스템 설계에서는 안정도, 추적성, 조절성, 민감도와 같은 다양한 목표를 균형 있게 고려해야 합니다. 개루프 시스템은 구현이 간단하지만 외란에 취약한 반면, 폐루프 시스템은 더 복잡하지만 외란 제거와 강인성이 뛰어납니다.

실제 제어 시스템 설계에서는 시스템의 물리적 제약, 센서 노이즈, 모델링 불확실성 등 다양한 요소를 고려해야 하며, 시간 영역과 주파수 영역에서의 분석을 통해 최적의 성능을 달성할 수 있는 제어기를 설계해야 합니다.