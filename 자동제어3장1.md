# 동적 모델(Dynamic Models)의 이해

## 1. 기본 개념

### 동적 모델(Dynamic Model)
- **정의**: 시간과 변화의 관점에서 시스템의 입출력 관계를 수식적으로 표현한 것
- **특징**: 시간에 종속적이므로 시스템의 과거 상태가 현재 출력에 영향을 미침
- **중요성**: 많은 시스템들은 외부와의 반응이 요구되는 시간 안에 이루어져야 하므로 동적 모델이 필요함

### 미분방정식과 동적 시스템
- **미분방정식**: 시간에 대한 값의 변화를 표현해주는 수학적 도구
- **예시**: 가속도 → 속도 → 위치의 관계 (각각 시간에 대한 미분/적분 관계)

### 미분방정식의 종류

1. **동차 미분방정식(Homogeneous Differential Equation)**
   - 초기값에 대해 외부 입력 없음
   - 형태: $\frac{d^2x(t)}{dt^2} - 2\frac{dx(t)}{dt} - 3x(t) = 0$
   - 제어공학의 관점: 해가 수렴/발산 여부와 수렴 시 수렴 속도를 검토하고, 해의 특성을 조절함

2. **비동차 미분방정식(Non-homogeneous Differential Equation)**
   - 외부 입력에 의한 시스템 반응 표현
   - 형태: $\frac{d^2x(t)}{dt^2} - 2\frac{dx(t)}{dt} - 3x(t) = u(t)$
   - 제어공학의 관점: 원하는 형태의 $x(t)$를 얻기 위해 $u(t)$를 조절하는 방법을 연구

## 2. 라플라스 변환(Laplace Transform)

### 라플라스 변환의 중요성
- 미분 연산을 아주 효율적으로 수행하여 수식적 표현을 단순화
- 시간 도메인에서 복잡한 연산을 s-도메인에서 사칙연산으로 표현하여 해를 쉽게 구할 수 있음

### 라플라스 연산자
- $\frac{d}{dt}$ 연산자에 이 함수가 해당하면 $s$로 표현
- $\frac{d^n}{dt^n}$의 경우에도 $s^n$으로 표현

## 3. 전달함수(Transfer Function)

### 정의와 의미
- **교과서 정의**: 입력과 출력인 $U(s)$에서 $Y(s)$로의 전달 계수(gain)인 함수 $H(s)$
- **실용적 정의**: 입력과 출력을 분리하여 시스템 고유의 성질만을 반영하는 함수
- **수식 표현**: $G(s) = \frac{Y(s)}{U(s)} = \frac{N(s)}{D(s)}$

### 극점(Pole)과 영점(Zero)
- **극점(Pole)**: $D(s) = 0$이 되는 값들로, 시스템 반응에서 아주 중요한 역할 수행
  - $G(s_p) = \infty$
- **영점(Zero)**: $N(s) = 0$이 되는 값
  - $G(s_z) = 0$

### 전달함수의 활용
1. **시스템 특성 파악**
   - 전달함수의 분모는 '특성 다항식(characteristic polynomial)'이라 부름
   - 이 다항식이 0인 '특성방정식(characteristic equation)'의 해를 통해 시스템의 안정성 결정
   - 시스템의 발산/수렴 여부 확인 가능

2. **고유값(Eigenvalue) 확인**
   - 물리적인 의미로 보면 물체의 상태 또는 고유 주파수 파악 가능

3. **주파수 응답 분석**
   - 시스템이 다양한 주파수의 입력에 어떻게 반응하는지 분석 가능

## 4. 상태방정식(State Equation)

### 정의
- **상태(State)**: 시스템을 완벽히 묘사하는데 필요한 최소한의 정보
- **상태방정식**: 시스템 관련 정보와 입출력 관계를 일차 미분방정식 형태로 표현

### 상태공간 표현
- 고차 미분방정식으로 이루어진 시스템의 특성을 최소의 정보로 완벽하게 표현하는 방법
- 입력 $u$와 출력 사이의 관계를 일차 미분방정식의 형태로 변환
- 일반적인 형태:
  ```
  ẋ = Ax + Bu
  y = Cx + Du
  ```

## 5. 기계 시스템의 동역학(Dynamics of Mechanical Systems)

### 운동방정식 개발 과정
1. 물체의 임의의 위치를 서술하는데 필요한 좌표계와 미지수를 지정
2. 각 요소의 자유물체도(물체에 가해지는 힘과 방향 표시)를 그리고, 각 강체의 관성 중심에 대한 가속을 표시
3. 병진운동과 회전운동 형태의 뉴턴 법칙을 적용
4. 내력(입력과 출력이 아닌 변수)을 제거하기 위해 방정식 결합

### 뉴턴의 법칙
1. **병진운동(Translation Motion)**
   - $\sum F = ma = m\ddot{x}$
   - 모든 힘의 합은 질량과 가속도의 곱으로 표현됨

2. **회전운동(Rotation Motion)**
   - $\sum \tau = I\alpha = I\ddot{\theta}$
   - 모든 토크의 합은 관성 모멘트와 각가속도의 곱으로 표현됨
   - 질량관성모멘트(I): 회전축을 중심으로 회전하는 물체가 계속해서 회전을 지속하려는 성질

## 6. 예제: 자동차 크루즈 컨트롤 모델

### 문제 설명
- 자동차 속도와 전진 운동에 대한 운동 방정식을 작성
- 엔진이 힘 $u$를 가한다고 가정
- 입력 $u$와 출력 $v$(속도) 사이의 전달함수를 구함

### 해결 과정
1. **자유물체도 작성**
   - 차량에 작용하는 힘: 엔진 힘 $u$, 마찰력 $b\dot{x}$
   - 뉴턴 제2법칙 적용: $u - b\dot{x} = m\ddot{x}$

2. **미분방정식 정리**
   - $\ddot{x} + \frac{b}{m}\dot{x} = \frac{u}{m}$
   - 이는 "$\dot{x}$(속도)의 운동"으로 표현됨

3. **전달함수 유도**
   - 라플라스 변환 적용: $\mathcal{L}\{\ddot{x} + \frac{b}{m}\dot{x} = \frac{u}{m}\}$
   - $(s^2 + \frac{b}{m}s)X(s) = (\frac{1}{m})U(s)$
   - $T.F. = \frac{출력}{입력} = \frac{X(s)}{U(s)} = \frac{1/m}{s^2 + bs/m} = \frac{1}{ms^2 + bs}$

4. **상태공간 표현**
   - 상태변수 정의: $x = \begin{bmatrix} \dot{x} \\ x \end{bmatrix}$
   - 상태방정식: $\dot{x} = \begin{bmatrix} -b/m & 0 \\ 1 & 0 \end{bmatrix}x + \begin{bmatrix} 1/m \\ 0 \end{bmatrix}u$
   - 출력방정식: $y = \begin{bmatrix} 1 & 0 \end{bmatrix}x$

## 7. 예제: 위성 자세 제어 모델

### 문제 설명
- 위성의 자세 제어 시스템 모델링
- 안테나, 센서, 태양 전지판이 적절히 방향을 유지하도록 자세 제어 필요
- 한 축에 대한 운동 방정식과 블록 다이어그램 작성, 전달함수 도출

### 해결 과정
1. **운동 방정식 작성**
   - 위성에 작용하는 토크: 외부 모멘트 $M_0$, 제어력에 의한 모멘트 $F_c d$
   - 회전 운동 방정식: $M_0 + F_c d = I\ddot{\theta}$

2. **전달함수 유도**
   - 라플라스 변환 적용: $\mathcal{L}\{M_0 + F_c d = I\ddot{\theta}\}$
   - $M_0 + F_c d = Is^2\theta(s)$
   - $U(s) = Is^2\theta(s)$
   - $T.F. = \frac{\theta(s)}{U(s)} = \frac{1}{Is^2}$

3. **블록 다이어그램 표현**
   - $U(s) \rightarrow [1/I] \rightarrow [1/s] \rightarrow [1/s] \rightarrow \theta(s)$

## 8. 추가 개념: 시스템 응답 분석

### 시간 영역 응답(Time Domain Response)
- **과도 응답(Transient Response)**: 시스템이 평형 상태에 도달하기 전의 초기 응답
- **정상 상태 응답(Steady-state Response)**: 시스템이 평형 상태에 도달한 후의 장기적 응답

### 시스템 응답 특성
1. **상승 시간(Rise Time)**: 출력이 목표값의 10%에서 90%까지 도달하는 데 걸리는 시간
2. **오버슈트(Overshoot)**: 출력이 목표값을 초과하는 정도 (%)
3. **정착 시간(Settling Time)**: 출력이 목표값의 ±2% 내에 영구적으로 머무를 때까지 걸리는 시간
4. **정상 상태 오차(Steady-state Error)**: 시간이 무한대일 때 기준 입력과 실제 출력 간의 차이

### 시스템 안정성(System Stability)
- **안정성 정의**: 유한한 입력에 대해 시스템의 출력이 유한한 값으로 수렴하는 특성
- **BIBO 안정성(Bounded-Input Bounded-Output Stability)**: 유한한 입력에 대해 항상 유한한 출력을 생성하는 시스템 특성
- **점근적 안정성(Asymptotic Stability)**: 초기 조건이 0으로 수렴하는 특성

## 9. 추가 개념: 주파수 응답 분석

### 주파수 응답(Frequency Response)
- **정의**: 시스템이 다양한 주파수의 정현파 입력에 어떻게 반응하는지를 나타내는 특성
- **표현 방법**: 보드 선도(Bode plot), 나이퀴스트 선도(Nyquist plot)

### 보드 선도(Bode Plot)
- **구성**: 진폭비(크기)와 위상차를 주파수의 함수로 표현한 그래프
- **특징**: 
  - 크기는 로그 스케일(dB)로 표시
  - 위상은 각도(°)로 표시
  - 시스템의 주파수 응답 특성 파악에 유용

### 나이퀴스트 선도(Nyquist Plot)
- **구성**: 복소평면에서 주파수 응답을 표현한 그래프
- **특징**: 
  - 시스템의 안정성 판별에 유용
  - 폐루프 시스템의 안정성을 개루프 전달함수로 판단 가능

## 10. 실생활 동적 시스템 예시

### 1. 자동차 서스펜션 시스템
- **동적 모델**: 스프링-댐퍼-질량 시스템으로 모델링
- **입력**: 도로 표면의 불규칙성
- **출력**: 차체의 수직 운동
- **전달함수**: $G(s) = \frac{Y(s)}{X(s)} = \frac{cs + k}{ms^2 + cs + k}$
  - $m$: 차체 질량, $c$: 댐핑 계수, $k$: 스프링 상수

### 2. 전기 모터 제어
- **동적 모델**: 전기적 및 기계적 동역학 결합
- **입력**: 모터에 인가되는 전압
- **출력**: 모터 축의 회전 속도 또는 위치
- **전달함수**: $G(s) = \frac{\Omega(s)}{V(s)} = \frac{K_t}{(Js + b)(Ls + R) + K_t K_e}$
  - $K_t$: 토크 상수, $J$: 관성 모멘트, $b$: 마찰 계수, $L$: 인덕턴스, $R$: 저항, $K_e$: 역기전력 상수

### 3. 온도 제어 시스템
- **동적 모델**: 열전달 방정식으로 모델링
- **입력**: 히터 전력 또는 냉각 시스템 작동
- **출력**: 시스템 온도
- **전달함수**: $G(s) = \frac{T(s)}{Q(s)} = \frac{1}{Cs + 1/R}$
  - $C$: 열용량, $R$: 열저항

## 11. 제어 시스템 설계 과정

### 1. 문제 정의와 요구 사항 분석
- 제어 목표 설정
- 성능 지표(응답 시간, 오버슈트, 정상 상태 오차 등) 정의

### 2. 시스템 모델링
- 물리적 법칙을 기반으로 수학적 모델 구축
- 전달함수 또는 상태 공간 표현 도출

### 3. 분석
- 시스템의 안정성 분석
- 시간 영역 및 주파수 영역에서의 응답 분석

### 4. 제어기 설계
- 제어 알고리즘 선택(PID, 상태 피드백, 최적 제어 등)
- 제어기 매개변수 조정

### 5. 시뮬레이션 및 검증
- 컴퓨터 시뮬레이션을 통한 제어 시스템 동작 검증
- 안정성 및 성능 요구 사항 충족 확인

### 6. 구현 및 테스트
- 제어 알고리즘 실제 시스템에 구현
- 실제 환경에서의 테스트 및 최적화