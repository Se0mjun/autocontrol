# 제어공학: 시스템 타입과 오차 분석

## 1. 감도 함수와 상호보완적 감도 함수

제어 시스템에서 외부 변화에 대한 시스템의 민감도를 이해하는 것은 중요합니다.

### 1.1. 감도 함수 (Sensitivity Function)

$$S = \frac{1}{1+GD_{c1}}$$

- **폐루프 시스템(Closed-loop System)의 TF Error**는 **개루프 시스템(Open-loop System)의 TF Error**에 비해 **감도 함수(S)** 만큼 덜 민감합니다.
- 감도 함수는 시스템이 외부 파라미터 변화에 얼마나 민감한지를 나타냅니다.
- 감도 함수 값이 작을수록 시스템이 외부 변화에 강인함을 의미합니다.

### 1.2. 상호보완적 감도 함수 (Complementary Sensitivity Function)

$$T = \frac{GD_{c1}}{1+GD_{c1}} = 1 - S$$

- S + T = 1 관계가 항상 성립합니다.
- T는 폐루프 전달함수로, 입력 신호가 출력에 얼마나 잘 전달되는지를 나타냅니다.
- 저주파에서는 T ≈ 1, S ≈ 0으로 입력 추적이 잘 되고, 고주파에서는 T ≈ 0, S ≈ 1로 노이즈 감쇠가 발생합니다.

## 2. 시스템 타입(System Type)

시스템 타입은 시스템의 정상상태 추적 능력을 평가하는 지표입니다.

### 2.1. 과도 상태와 정상 상태

제어 시스템의 응답은 두 가지 상태로 구분할 수 있습니다:

- **과도 상태(Transient State)**: 시스템이 입력 변화에 적응하는 초기 단계. 시스템의 초기 조건에 영향을 받습니다.
- **정상 상태(Steady State)**: 충분한 시간이 지난 후 시스템이 도달하는 안정적인 상태. 시스템 타입 분석은 주로 이 상태에 초점을 맞춥니다.

### 2.2. 기준 입력(Reference)에 대한 System Type

시스템이 기준 입력을 얼마나 잘 추적하는지는 정상상태 오차로 평가합니다:

$$E(s) = \frac{1}{1+GD_{c1}}R(s) = S \cdot R(s)$$

정상상태 오차는 최종값 정리를 사용하여 구합니다:

$$e_{ss} = \lim_{t \to \infty} e(t) = \lim_{s \to 0} s \cdot E(s) = \lim_{s \to 0} s \cdot S \cdot R(s)$$

### 2.3. 시스템 타입과 원점 극점(Pole)의 관계

시스템 타입은 개루프 전달함수 $GD_{c1}$이 원점에 가지는 극점의 개수로 결정됩니다:

$$GD_{c1} = \frac{GD_{c10}}{s^n}$$

여기서 n이 시스템 타입입니다.

### 2.4. 다양한 입력 신호에 대한 정상상태 오차

#### 계단 입력(Step Input): $R(s) = \frac{1}{s}$

- **Type 0**: $e_{ss} = \frac{1}{1+K_p}$ (상수 오차)
- **Type 1 이상**: $e_{ss} = 0$ (완벽 추적)

#### 경사 입력(Ramp Input): $R(s) = \frac{1}{s^2}$

- **Type 0**: $e_{ss} = \infty$ (발산)
- **Type 1**: $e_{ss} = \frac{1}{K_v}$ (상수 오차)
- **Type 2 이상**: $e_{ss} = 0$ (완벽 추적)

#### 포물선 입력(Parabolic Input): $R(s) = \frac{1}{s^3}$

- **Type 0, 1**: $e_{ss} = \infty$ (발산)
- **Type 2**: $e_{ss} = \frac{1}{K_a}$ (상수 오차)
- **Type 3 이상**: $e_{ss} = 0$ (완벽 추적)

### 2.5. 시스템 타입과 오차 상수

#### Type 0 시스템
- 위치 오차 상수: $K_p = GD_{c10}(0)$
- 물리적 의미: 시스템의 DC 이득으로, 계단 입력에 대한 정상상태 오차를 결정

#### Type 1 시스템
- 속도 오차 상수: $K_v = \lim_{s \to 0} s \cdot GD_{c1}(s)$
- 물리적 의미: 경사 입력(일정 속도)에 대한 추적 능력을 나타냄

#### Type 2 시스템
- 가속도 오차 상수: $K_a = \lim_{s \to 0} s^2 \cdot GD_{c1}(s)$
- 물리적 의미: 포물선 입력(일정 가속도)에 대한 추적 능력을 나타냄

### 2.6. 내부 모델 원리(Internal Model Principle)와 시스템 타입

내부 모델 원리는 제어 이론의 중요한 개념으로, 시스템 타입과 밀접한 관련이 있습니다:

- **원리**: 제어 시스템이 특정 입력 신호를 오차 없이 추적하려면, 해당 입력 신호의 생성기 모델이 제어기 또는 플랜트 안에 포함되어야 합니다.
- **적용**: 계단 입력은 $\frac{1}{s}$로 모델링되므로, Type 1 시스템(원점에 극점 한 개)은 계단 입력을 오차 없이 추적합니다.
- **일반화**: Type n 시스템은 n차 다항식 입력까지 오차 없이 추적할 수 있습니다.

## 3. 외란(Disturbance)에 대한 System Type

외란에 대한 시스템의 거부 능력도 시스템 타입으로 평가할 수 있습니다.

### 3.1. 외란에 대한 전달함수

외란(W)에 대한 출력(Y)의 관계는 다음과 같습니다:

$$\frac{E(s)}{W(s)} = \frac{-Y(s)}{W(s)} = T_w$$

외란 거부가 잘 되려면 W에 대해 Y가 0이 되어야 합니다.

### 3.2. 외란 거부 특성

외란 거부가 잘 되기 위해서는 전달함수 $T_w$의 원점에 영점(Zero)이 있어야 합니다:

$$Y(\infty) = \lim_{s \to 0} s \cdot Y(s) = -\lim_{s \to 0} s \cdot T_w \cdot W(s)$$

- 계단 외란: $W(s) = \frac{1}{s}$인 경우, $T_w$는 원점에 최소 하나의 영점을 가져야 외란이 정상상태 출력에 영향을 미치지 않습니다.
- 경사 외란: $W(s) = \frac{1}{s^2}$인 경우, $T_w$는 원점에 최소 두 개의 영점이 필요합니다.

### 3.3. 외란 주입 위치에 따른 영향

외란이 시스템의 다른 위치에 주입될 경우 거부 특성이 달라집니다:

1. **플랜트 입력에 주입**: 제어기의 적분 작용이 외란 거부에 직접 기여합니다.
2. **플랜트 출력에 주입**: 높은 루프 이득이 외란 감쇠에 필요합니다.
3. **피드백 경로에 주입**: 시스템 구조에 따라 거부 성능이 결정됩니다.

## 4. 제어기 설계 예시

### 4.1. 기준 입력 추적을 위한 제어기 설계

주어진 플랜트 $G(s) = \frac{3}{s(s+1)}$에 대해 Type 2 시스템이 되도록 제어기 설계:

1. 현재 플랜트는 원점에 하나의 극점을 가지고 있음
2. Type 2 시스템을 위해 제어기에 원점 극점 하나 추가 필요
3. $D(s) = \frac{K}{s}$ 형태의 적분 제어기 설계
4. 결과적으로 $D(s)G(s) = \frac{3K}{s^2(s+1)}$
5. $K=1$일 때 계산 과정:
   - 전달함수: $T = \frac{DG}{1+DG} = \frac{3/s^2(s+1)}{1+3/s^2(s+1)} = \frac{3}{s^2+s+3}$
   - 경사 입력 $R(s) = \frac{1}{s^2}$에 대한 오차:
     $E(s) = (1-T)R(s) = \frac{s^2+s}{s^2+s+3} \cdot \frac{1}{s^2}$
   - 최종값 정리 적용:
     $e_{ss} = \lim_{s \to 0} s \cdot E(s) = \lim_{s \to 0} s \cdot \frac{s^2+s}{s^2+s+3} \cdot \frac{1}{s^2} = \lim_{s \to 0} \frac{s+1}{s^2+s+3} = \frac{1}{3}$
   - 가속도 오차 상수: $K_a = 3$

### 4.2. DC 모터 위치 제어 시스템 예시

DC 모터 위치 제어 시스템에서 다양한 제어기 설계:

#### (a) 비례(P) 제어기 경우: $D_c(s) = K_p$
- 외란에 대한 System Type: 0
- 외란 거부 성능이 제한적
- 계산 예시:
  * 외란-출력 전달함수: $T_w = -\frac{B}{zs^2+s+AK_p}$
  * 계단 외란에 대한 정상상태 오차: $y_{ss} = -\frac{B}{AK_p}$
  * $K_p$를 증가시키면 외란 영향을 줄일 수 있으나 완전히 제거할 수 없음

#### (b) 비례-적분(PI) 제어기 경우: $D_c(s) = K_p + \frac{K_I}{s}$
- 기준 입력에 대한 System Type: 2
- 보다 뛰어난 추적 성능과 외란 거부 능력
- 계산 예시:
  * 개루프 전달함수: $D_c(s)G(s) = \frac{(K_ps+K_I)A}{s^2(zs+1)}$
  * 원점에 극점 2개로 System Type 2
  * 경사 입력에 대한 정상상태 오차: $e_{ss} = 0$
  * 가속도 오차 상수: $K_a = K_IA$

### 4.3. PID 제어기의 역할

PID(비례-적분-미분) 제어기는 세 가지 항의 조합으로 다양한 제어 성능을 제공합니다:

$$D_c(s) = K_p + \frac{K_I}{s} + K_D s$$

- **비례(P) 항**: 현재 오차에 비례하는 제어 동작을 제공, 응답 속도 향상
- **적분(I) 항**: 과거 오차의 누적에 기반한 제어 동작, 정상상태 오차 제거, System Type 증가
- **미분(D) 항**: 오차의 변화율에 기반한 제어 동작, 과도 응답 개선, 안정성 향상

PID 제어기의 주요 특성:
- P+I 조합으로 System Type을 1 증가시킬 수 있음
- D 항은 System Type에 영향을 주지 않지만 과도 응답과 안정성 향상에 기여
- 임의의 PID 파라미터 조합으로 시스템의 동적 응답 특성 조정 가능

## 5. 디지털 제어 시스템에서의 시스템 타입

현대 제어 시스템은 대부분 디지털 방식으로 구현되므로, 이산 시간 영역에서의 시스템 타입 개념도 중요합니다.

### 5.1. z-영역에서의 시스템 타입

이산 시간 시스템에서 시스템 타입은 z = 1 (단위원의 z-변환에서 s = 0에 해당)에서의 극점 개수로 정의됩니다:

- **Type 0**: z = 1에 극점 없음
- **Type 1**: z = 1에 단일 극점 존재
- **Type 2**: z = 1에 이중 극점 존재

### 5.2. 디지털 적분기

연속 시간 적분기 $\frac{1}{s}$의 이산 시간 대응은 여러 방법으로 구현 가능합니다:

1. **후방 차분법**: $\frac{Tz}{z-1}$
2. **전방 차분법**: $\frac{T}{z-1}$
3. **이항 변환**: $\frac{T(z+1)}{2(z-1)}$

여기서 T는 샘플링 주기입니다.

### 5.3. 디지털 제어에서의 유의 사항

- 샘플링 주기가 시스템 성능에 영향을 미침
- 너무 긴 샘플링 주기는 제어 성능 저하를 초래
- 샘플링으로 인한 지연이 추가 위상 지연을 발생시켜 안정성에 영향

## 6. 시스템 타입의 한계와 실용적 고려사항

### 6.1. 안정성과의 균형

시스템 타입을 높이면 정상상태 오차는 감소하지만, 시스템 안정성이 저하될 수 있습니다:

- 원점에 극점을 추가할수록 위상 여유가 감소
- Type 2 이상의 시스템은 안정성 확보가 더 어려움
- 실제 설계에서는 제어 성능과 안정성 사이의 균형 필요

### 6.2. 비선형 시스템에서의 적용

실제 대부분의 시스템은 비선형이므로, 선형 시스템 타입 이론의 직접 적용이 제한적일 수 있습니다:

- 작동점 주변에서 선형화하여 근사적 시스템 타입 결정 가능
- 게인 스케줄링과 같은 방법으로 다양한 작동 조건에서 적절한 시스템 타입 유지
- 비선형 제어 기법(예: 슬라이딩 모드 제어)을 통해 시스템 타입 개념의 일반화 가능

### 6.3. 실제 시스템의 제한 요소

실제 시스템에서는 다양한 요소가 시스템 타입의 장점을 제한할 수 있습니다:

- **액추에이터 포화**: 제어 입력이 최대값에 도달하면 적분기 와인드업 발생 가능
- **센서 노이즈**: 높은 시스템 타입은 고주파 노이즈에 더 민감
- **모델링 불확실성**: 실제 플랜트 동역학이 모델과 다를 경우 성능 저하

### 6.4. 시스템 타입 실험적 확인 방법

시스템 타입은 다음과 같은 방법으로 실험적으로 확인할 수 있습니다:

1. **계단 응답 테스트**: 계단 입력을 주고 정상상태 오차가 0이면 최소 Type 1
2. **경사 응답 테스트**: 경사 입력을 주고 정상상태 오차가 0이면 최소 Type 2
3. **외란 응답 테스트**: 계단 외란을 주입하고 정상상태에서 외란 영향이 0이면 해당 외란 경로에 대해 최소 Type 1

## 7. 실제 적용 사례

### 7.1. 자동차 순항 제어 시스템

- **요구사항**: 일정 속도 유지, 경사로 주행 시 속도 유지
- **시스템 타입**: 최소 Type 1 (속도 유지를 위해)
- **구현**: PI 제어기 사용으로 Type 1 확보
- **성능 지표**:
  * 속도 오차 상수 $K_v$가 클수록 경사로에서 속도 변화 감소
  * 실제 구현에서는 차량 무게, 공기 저항 등의 비선형성 고려 필요

### 7.2. 로봇 팔 위치 제어

- **요구사항**: 정확한 위치 이동, 부하 변화에 강인함
- **시스템 타입**: Type 2 이상 (위치 및 속도 추적)
- **구현**: 캐스케이드 제어 구조의 PID 제어기
- **특징**:
  * 내부 루프: 속도/토크 제어 (빠른 응답)
  * 외부 루프: 위치 제어 (정확한 추적)
  * 중력 보상을 통한 외란 거부 성능 향상

### 7.3. 온도 제어 시스템

- **요구사항**: 정확한 온도 유지, 외부 온도 변화에 강인함
- **시스템 타입**: Type 1 (온도 유지)
- **구현**: PI 제어기와 피드포워드 제어 결합
- **특징**:
  * PI 제어기로 정상상태 오차 제거
  * 피드포워드 항으로 예측 가능한 외란(외부 온도 변화) 보상
  * 안티와인드업 메커니즘으로 액추에이터 포화 문제 해결

## 8. 제어 시스템 설계 지침

1. **시스템 요구사항 분석**:
   - 어떤 입력 신호를 추적해야 하는가?
   - 외란 거부 성능이 필요한가?
   - 정상상태 오차 허용 범위는?

2. **필요한 System Type 결정**:
   - 계단 입력을 오차 없이 추적하려면 최소 Type 1
   - 경사 입력을 오차 없이 추적하려면 최소 Type 2
   - 포물선 입력을 오차 없이 추적하려면 최소 Type 3

3. **제어기 구조 선택**:
   - P 제어기: Type 0, 간단한 구현, 제한된 성능
   - PI 제어기: Type +1, 정상상태 오차 제거
   - PID 제어기: Type +1, 과도 응답 개선
   - 고급 제어기: 상태 피드백, 모델 예측 제어 등

4. **오차 상수 조정**:
   - 시스템이 완벽 추적하지 못하는 경우 오차 상수를 키워 오차 감소
   - Type 0: $K_p$ 증가로 오차 감소
   - Type 1: $K_v$ 증가로 경사 입력 오차 감소
   - Type 2: $K_a$ 증가로 포물선 입력 오차 감소

5. **안정성 확인**:
   - 시스템 타입을 높이면 추적 성능은 향상되지만 안정성이 저하될 수 있음
   - 항상 안정성 분석을 병행해야 함
   - 위상 여유와 이득 여유 확인
   - 실제 시스템에서는 안티와인드업, 노이즈 필터링 등 추가 메커니즘 고려