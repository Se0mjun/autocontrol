# 보상기 설계와 제어 시스템 분석

## 1. 기본 개념 복습

### 1.1 제어 시스템의 기본 원리

제어 시스템은 시스템의 응답이 원하는 사양(reference)을 따르도록 하는 것을 목표로 합니다. 제어 시스템의 응답은 두 가지 주요 부분으로 구성됩니다:

1. **과도 상태(Transient State)**: 
   - 입력과 무관하게 시스템의 특성으로 인해 발생하는 초기 진동
   - 폐루프 전달함수의 극점(pole)에 의해 결정됨
   - rise time, settling time 등 시간 응답 특성 결정

2. **정상 상태(Steady State)**:
   - 충분한 시간이 지난 후 시스템이 안정되어 유지하는 상태
   - 시스템 타입에 의해 결정됨
   - 시스템 타입은 개루프 전달함수에서 원점에 위치한 극점의 개수

### 1.2 근궤적의 기본 개념

근궤적(Root Locus)은 특정 파라미터(일반적으로 이득 K)가 0에서 무한대까지 변화할 때 폐루프 시스템의 극점(root)이 s-평면에서 어떻게 움직이는지 보여주는 그래픽 방법입니다.

단위 피드백 시스템에서 전달함수는 다음과 같습니다:
```
Y(s)/R(s) = KG(s)/(1 + KG(s))
```
여기서:
- K는 이득 파라미터 (0 → ∞)
- G(s)는 개루프 전달함수

시스템의 특성을 결정하는 것은 특성방정식 `1+KG(s)=0`의 근(root)입니다.

근궤적을 그릴 때 두 가지 조건을 고려해야 합니다:
1. **크기 조건(Magnitude Condition)**: |KG(s)| = 1
2. **각도 조건(Phase Condition)**: ∠KG(s) = 180° 또는 -180°

이러한 조건을 만족하는 s-평면 상의 점들이 바로 근궤적을 형성합니다.

## 2. 근궤적을 이용한 제어기 설계

### 2.1 제어 시스템 설계의 목표

제어 시스템 설계 시 주요 목표는 다음과 같습니다:

1. **과도 응답 특성 개선**: 
   - Rise time, settling time 최적화
   - 오버슈트 제한
   - 감쇠비(damping ratio) 조정

2. **정상 상태 특성 개선**:
   - 정상 상태 오차 감소
   - 외란 제거 능력 향상

위 목표를 달성하기 위해서는 폐루프 시스템의 극점을 원하는 위치로 이동시켜야 합니다. 그러나 단순히 이득 K를 조절하는 것만으로는 한계가 있습니다.

```
[설계 과정 도식화]
1. 원하는 응답 특성 정의 → 
2. 필요한 폐루프 극점 위치 계산 → 
3. 적절한 제어기 구조 선택 → 
4. 제어기 파라미터 최적화
```

### 2.2 I(적분) 제어기 해석

#### I 제어기의 주요 장점

I 제어기의 가장 큰 장점은 **정상 상태 오차를 줄여준다**는 것입니다. 

- **원리**: 정상 상태 응답 개선 = 정상 상태 오차 감소 = 시스템 타입 증가 = 개루프 전달함수에 극점 추가
- **I 제어기의 전달함수**: `C(s) = Ki/s`

#### I 제어기의 설계 방향

I 제어기는 "과도 상태는 만족스럽지만 정상 상태 오차가 문제"인 경우에 적용합니다. 기존의 잘 설정된 과도 응답 특성을 유지하면서 정상 상태 오차만 감소시키는 것이 목표입니다.

#### I 제어기의 한계

1. 물리적으로 구현이 어려운 경우가 있음
2. 오버슈트에 대한 응답이 불안할 수 있음
3. 기존 과도 상태를 유지하면서 정상 상태만 개선하는 것이 불가능한 경우가 많음

#### 근궤적을 통한 I 제어기 영향 분석

I 제어기를 추가하면 시스템 타입이 1 증가하지만, 새로운 각도 조건이 생기면서 과도 응답 특성이 변화합니다.

**미제어 시스템과 I 제어기 적용 시스템 비교**:

미제어 시스템:
- 원하는 시간 응답 특성에 맞는 폐루프 극점 위치 존재
- 각도 조건: `-180° = -θ₁ - θ₂ - θ₃`

I 제어기 적용 시스템:
- 원점에 추가 극점으로 인한 새로운 각도 θ₄ 발생
- 각도 조건: `-180° ≠ -θ₁ - θ₂ - θ₃ - θ₄`
- 결과적으로 원하는 과도 응답 특성을 유지할 수 없음

결론: I 제어기를 사용하면 시스템 타입을 증가시킬 수 있지만, 원하는 과도 상태 응답 특성을 유지하기 어렵습니다.

### 2.3 PI 제어기 해석

#### PI 제어기의 개념

PI 제어기는 I 제어기의 한계를 극복하기 위한 해결책입니다.

**질문**: I 제어기를 사용해서 정상 상태 오차를 줄이려 했더니 새로운 각도 조건이 생겨 과도 상태가 망가졌습니다. 좋은 방법이 없을까요?

**답변**: PI 제어기를 사용해 영점(zero)도 함께 추가합니다!

#### PI 제어기의 작동 원리

원점 극점에 의해 생긴 θ₄를 상쇄시키는 영점을 추가하여 θ₅를 만듭니다.

- **PI 제어기의 전달함수**: `C(s) = Kp + Ki/s = (Kp·s + Ki)/s`
- 영점의 위치: `s = -Kp/Ki`

영점을 원점과 가깝게 배치(Ki/Kp를 0에 가깝게 선택)하면, 기존 과도 상태 응답을 방해하지 않으면서 시스템 타입을 증가시킬 수 있습니다.

#### PI 제어기의 크기 영향

PI 제어기는 크기 조건도 변화시킵니다:

미제어 시스템:
- 크기 = 1/|A||B||C|

PI 제어기 적용 시스템:
- 크기 = |E|/|A||B||C||D| ≈ 1/|A||B||C|
- 여기서 |D| ≈ |E|가 되도록 설계

## 3. 보상기(Compensator) 유형과 설계

### 3.1 위상-선행 보상기(Lead Compensator)

위상-선행 보상기는 과도 응답 특성을 개선하기 위해 사용됩니다.

**전달함수**: `C(s) = K·(s+a)/(s+b)` (여기서 a < b)

**특징**:
- 위상 여유 증가
- 시스템 대역폭 증가
- 상승 시간 감소
- 오버슈트 감소 가능
- 감쇠비 증가

**설계 과정**:
1. 원하는 폐루프 극점 위치 결정
2. 필요한 위상 증가량 계산
3. 보상기 파라미터(a, b) 결정

### 3.2 위상-지연 보상기(Lag Compensator)

위상-지연 보상기는 주로 정상 상태 응답을 개선하기 위해 사용됩니다.

**전달함수**: `C(s) = K·(s+c)/(s+d)` (여기서 c > d)

**특징**:
- 저주파 이득 증가
- 정상 상태 오차 감소
- 과도 응답에 미치는 영향 최소화
- 시스템 대역폭 감소

**설계 과정**:
1. 원하는 정상 상태 오차 결정
2. 필요한 저주파 이득 증가량 계산
3. 보상기 파라미터(c, d) 결정

### 3.3 위상-선행-지연 보상기(Lead-Lag Compensator)

위상-선행-지연 보상기는 위상-선행과 위상-지연 보상기의 장점을 결합한 형태입니다.

**전달함수**: `C(s) = K·(s+a)/(s+b)·(s+c)/(s+d)` (여기서 a < b, c > d)

**특징**:
- 위상 여유 증가(위상-선행 부분)
- 저주파 이득 증가(위상-지연 부분)
- 과도 응답과 정상 상태 응답을 동시에 개선

**설계 과정**:
1. 위상-선행 부분을 설계하여 과도 응답 개선
2. 위상-지연 부분을 설계하여 정상 상태 오차 감소

## 4. 지배적 극점(Dominant Poles)

### 4.1 지배적 극점의 개념

특정 극점의 실수부가 다른 극점의 실수부보다 5~10배 이상 작다면, 이 극점은 시스템 응답에 지배적인 역할을 합니다.

```
[지배적 극점 설명 도식]
s-평면에서:
- 복소 평면의 원점에 가까운 극점 = 시간 응답에서 오래 지속되는 성분
- 원점에서 멀리 있는 극점 = 빠르게 감쇠되는 성분
```

### 4.2 지배적 극점의 중요성

지배적 극점이 존재하면 해당 극점만을 고려하여 시스템을 근사적으로 해석할 수 있습니다. 이는 복잡한 고차 시스템을 단순화하여 분석할 수 있게 해줍니다.

- 2차 시스템으로 근사화하여 오버슈트, 상승 시간, 정착 시간 등을 쉽게 예측
- 제어기 설계 시 지배적 극점의 위치만 고려하여 설계 가능

### 4.3 지배적 극점 설계

제어 시스템 설계 시, 원하는 응답 특성을 갖도록 지배적 극점을 배치하고, 나머지 극점은 지배적 극점보다 충분히 왼쪽에 위치시켜 그 영향을 최소화합니다.

## 5. 실제 설계 예시

### 5.1 DC 모터 속도 제어 시스템

DC 모터의 속도 제어를 위한 제어기 설계 과정을 살펴보겠습니다.

**시스템 모델**: `G(s) = K/(s(s+a))`

**설계 목표**:
- 오버슈트 20% 이하
- 정착 시간 2초 이내
- 정상 상태 오차 없음

**설계 과정**:

1. 원하는 응답 특성에 따른 폐루프 극점 위치 계산:
   - 20% 오버슈트 → 감쇠비 ζ ≈ 0.45
   - 2초 정착 시간 → σ ≈ 2

2. 제어기 유형 선택:
   - 정상 상태 오차 제거를 위한 적분 요소 필요
   - 적절한 과도 응답을 위한 비례 요소 필요
   - PI 제어기 선택: `C(s) = Kp + Ki/s`

3. 근궤적 분석:
   - 원래 시스템의 근궤적 분석
   - PI 제어기 추가 후 근궤적 변화 확인
   - Ki/Kp 비율 최적화하여 원하는 극점 위치 달성

4. 시뮬레이션 및 검증:
   - 설계된 제어기의 응답 특성 확인
   - 필요한 경우 파라미터 미세 조정

### 5.2 항공기 자세 제어 시스템

항공기 피치(pitch) 제어를 위한 보상기 설계 예시입니다.

**시스템 모델**: `G(s) = K·(s+b)/(s²(s+c))`

**설계 목표**:
- 빠른 응답 시간
- 오버슈트 최소화
- 외란 제거 능력

**설계 과정**:

1. 위상-선행 보상기를 사용하여 과도 응답 개선:
   - `Clead(s) = K·(s+a)/(s+d)` (여기서 a < d)
   - 필요한 위상 여유 확보

2. 적분기 추가하여 정상 상태 오차 제거:
   - `Ci(s) = 1/s`

3. 최종 제어기:
   - `C(s) = K·(s+a)/(s(s+d))`
   - PID 제어기의 형태로 해석 가능

## 6. 고급 보상 기법

### 6.1 상태 피드백 제어

근궤적 방법의 한계를 넘어서려면 상태 피드백 제어를 고려할 수 있습니다.

**원리**: 시스템의 모든 상태 변수에 대한 피드백을 통해 극점 배치

**장점**:
- 다변수 시스템에 적용 가능
- 모든 폐루프 극점을 독립적으로 배치 가능
- 과도 응답과 정상 상태 응답을 동시에 최적화 가능

### 6.2 관측기 기반 제어

모든 상태 변수를 측정할 수 없는 경우, 관측기를 사용하여 상태를 추정할 수 있습니다.

**구조**:
- 상태 관측기(Observer) 설계
- 추정된 상태를 사용한 피드백 제어

### 6.3 로버스트 제어

모델링 불확실성이 큰 시스템에 대해 안정성과 성능을 보장하기 위한 제어 기법입니다.

**방법**:
- H∞ 제어
- μ-합성법
- 슬라이딩 모드 제어

## 7. 요약 및 결론

제어 시스템 설계에서 보상기의 선택은 시스템의 요구사항과 특성에 따라 달라집니다:

1. **P(비례) 제어기**: 
   - 가장 단순한 형태
   - 정상 상태 오차 존재
   - 이득 K 조절만으로 제한된 성능

2. **I(적분) 제어기**:
   - 정상 상태 오차 제거
   - 과도 응답 악화 가능성
   - 시스템 타입 증가

3. **PI 제어기**:
   - I 제어기의 장점 유지
   - 영점 추가로 과도 응답 특성 조절 가능
   - 시스템 타입 증가하면서 과도 응답 유지

4. **위상-선행 보상기**:
   - 과도 응답 개선
   - 위상 여유 증가
   - 시스템 대역폭 확장

5. **위상-지연 보상기**:
   - 정상 상태 오차 감소
   - 저주파 이득 증가
   - 과도 응답에 미치는 영향 최소화

근궤적 분석은 제어 시스템 설계의 강력한 도구이며, 다양한 보상기 설계에 활용될 수 있습니다. 적절한 보상기 선택을 통해 시스템의 과도 응답과 정상 상태 응답을 모두 만족시키는 제어 시스템을 설계할 수 있습니다.

## 8. 참고 문헌

1. Ogata, K., "Modern Control Engineering", 5th Edition
2. Franklin, G.F., Powell, J.D., and Emami-Naeini, A., "Feedback Control of Dynamic Systems", 7th Edition
3. Dorf, R.C. and Bishop, R.H., "Modern Control Systems", 13th Edition