# 피드백 제어 시스템(Feedback Control of Dynamic System)

## 1. 제어(Control)의 개념

### 교과서 정의
사용자가 원하는 특성이 플랜트에 구현되도록 입력을 결정하는 방법. 사용자가 플랜트에 원하는 특성을 제어 목표라 한다.

### 실용적 정의
무슨 방법을 써서라도 원하는 결과를 얻어내는 것.

### 예시: LED 제어
1. LED와 마이크로프로세서, 스위치를 준비한다
2. LED와 마이크로프로세서, 스위치를 연결한다
3. 마이크로프로세서에서 스위치의 입력을 받고 LED로 출력을 내보낸다

```
제어목표 -> [Controller] -> [Plant] -> 결과
```

## 2. 피드백 제어(Feedback Control)

### 교과서 정의
플랜트의 출력값을 컨트롤러의 입력 측에 되물림으로써 제어 입력을 만드는데 활용하는 방식.

### 실용적 정의
원하는 것을 잘 얻기 위해 현재 결과와 내가 원하는 것의 차이를 고려하는 방식.

### 예시: 방 온도 조절
1. 현재 상태: 방 온도 30°C (매우 덥다)
2. 제어 목표: 방 온도 18°C
3. 에어컨을 켠다
4. 온도가 점차 내려감: 29°C → 25°C → 19°C (에어컨 계속 작동)
5. 온도가 18°C에 도달 (목표 달성)
6. 만약 온도가 17°C로 내려가면 에어컨을 잠시 끈다
7. 이 과정을 무한 반복하여 목표 온도를 유지

```
   18°C     현재     [Controller]     [Plant]
   원하는    온도       (에어컨)        (방)
     ↓       ↓            ↓             ↓
제어목표 <-- [Sensor] <------------- 방온도변화
```

## 3. 동적 시스템과 정적 시스템(Dynamic vs Static System)

### 동적 시스템(Dynamic System)
- 과거/미래의 입력이 현재의 출력에 영향을 미치는 시스템 (memory 有)
- 미분, 적분 등의 요소가 포함됨

#### 예시: 커패시터와 저항이 있는 회로
```
          i(t)
     +----→----+
     |          |
     +    R     |
v(t) |    ↓     | vR(t)
     |    +     |
     |          |
     +    C     |
     |    ↓     | vC(t)
     |    -     |
     +----------+
```

여기서 출력 v(t)는 다음과 같이 표현됨:
```
R·i(t) + (1/C)∫i(τ)dτ = v(t)
```
과거 시간의 값(i(τ))이 현재 시간의 값에 영향을 미침

### 정적 시스템(Static System)
- 오직 현재 시간의 입력만이 출력을 결정
- 예시: 디지털 로직 회로

## 4. 시스템(System)

### 교과서 정의
입력 신호를 출력 신호로 변환해주는 대상체.

### 모델(Model)
시스템을 수식으로 표현한 것.

### LTI 시스템(Linear Time Invariant)
대부분의 교과서에서는 LTI 시스템을 가정한다.

#### Linear(선형성)
- Additivity(가산성): 임의의 x, y에 대해 f(x+y) = f(x) + f(y)
- Homogeneity(동차성): 임의의 x와 상수 α에 대해 f(αx) = αf(x)

#### Time Invariant(시불변성)
시스템의 입력에 대한 출력값이 시간에 따라 변하지 않음.

### LTI 시스템을 가정하는 이유
자연은 대부분 비선형 시스템으로 이루어져 있으나, 비선형 시스템 해석은 시간 도메인에서만 가능하고 매우 어렵다. 반면 LTI 시스템은 시간 도메인 분석뿐만 아니라 Fourier나 Laplace 변환을 통해 주파수 도메인이나 s 도메인에서 해석이 가능하여 분석이 용이하다.

## 5. 라플라스 변환(Laplace Transform)

### 정의
```
L{x(t)} = ∫₀^∞ x(t)e^(-st) dt
```

### 역변환
```
x(t) = (1/2πj) ∫(σ-j∞)^(σ+j∞) X(s)e^(st) ds
```

### 의미
임의의 신호를 복소지수함수의 합으로 신호 분리 가능.

### 복소주파수(Complex Frequency) s
- 정의: s = σ + jω
- 주파수를 변수 성분으로 갖는 복소수 형태의 변수
- ω: 주기 신호의 초당 cycle 수

### 오일러 공식
```
e^(jθt) = cos(θt) + jsin(θt)
e^(-jθt) = cos(θt) - jsin(θt)
```

따라서:
```
cos(θt) = (1/2)(e^(jθt) + e^(-jθt))
sin(θt) = (1/2j)(e^(jθt) - e^(-jθt))
```

### 신호 예제와 복소주파수

| 신호 | 예제 | 복소주파수 |
|------|------|------------|
| DC(상수) | x(t) = 5 | s = 0 |
| 지수 | x(t) = e^(-λt) | s = -λ |
| 정현파 | x(t) = sin(50t) | s = ±j50 |
| 지수정현파 | x(t) = e^(2t)cos(100t) | s = 2±j100 |

### 라플라스 변환의 중요성
복잡한 신호도 표현하기 쉽고, 시간에 관련된 신호를 s(복소주파수) 도메인으로 옮겨와 신호 해석을 용이하게 한다.

## 6. s-평면(Complex Frequency Plane)

### 정의
복소주파수의 실수부와 허수부를 직각좌표계에 대응시켜 표현한 평면.

```
         Im(s)
           ↑
           |        s = σ+jωt
           |        ↑ 빠르게
           |        진동
           |
-----------+----------→ Re(s)
  s = e^(-λt)     s = e^(σt)
           |
   빠르게  |
   감쇄    | s = 0 (DC)
           |
```

### s-평면과 신호의 수렴/발산
- 우리가 현실 세계에서 원하는 신호의 형태는 수렴 형태이다.
- s-평면에서 신호의 수렴/발산을 결정해주는 것은 복소주파수의 실수부(σ)이다.
- s-평면의 허수축(Imaginary axis)을 기준으로:
  - 실수부가 음수인 부분: LHP(Left Half Plane) - 신호가 수렴하는 영역
  - 실수부가 양수인 부분: RHP(Right Half Plane) - 신호가 발산하는 영역
- 제어의 목적은 RHP에 있는 신호를 LHP로 옮기는 작업이다.

## 7. 추가 개념: 전달함수(Transfer Function)

전달함수는 LTI 시스템에서 입력과 출력 사이의 관계를 s-도메인에서 나타낸 것이다.

### 정의
```
G(s) = Y(s)/U(s)
```
여기서:
- G(s): 전달함수
- Y(s): 출력의 라플라스 변환
- U(s): 입력의 라플라스 변환

### 특징
- 시스템의 동특성을 잘 나타냄
- 시스템 분석 및 설계에 유용
- 시스템의 안정성 분석에 활용

### 예시: RC 회로의 전달함수
RC 회로의 전달함수는 다음과 같다:
```
G(s) = 1/(RCs + 1)
```

## 8. 추가 개념: 폐루프 제어와 개루프 제어

### 개루프 제어(Open-loop Control)
- 피드백 없이 입력만으로 시스템을 제어
- 외부 변화에 대응하지 못함
- 구조가 단순하고 설계가 쉬움

```
참조입력 → [Controller] → [Plant] → 출력
```

### 폐루프 제어(Closed-loop Control)
- 피드백을 통해 출력을 입력에 반영
- 외부 변화에 대응 가능
- 안정성 향상, 오차 감소, 외란 제거 가능

```
참조입력 → (+) → [Controller] → [Plant] → 출력
           ↑                               |
           |                               |
          (-)←-----------[Sensor]←---------
```

## 9. 추가 개념: 시스템 안정성(Stability)

### 안정성의 정의
유한한 입력에 대해 시스템의 출력이 유한하게 유지되는 특성.

### 안정성 판별법

#### 라우스-후르비츠 판별법(Routh-Hurwitz Criterion)
- 특성방정식의 계수를 이용하여 안정성 판별
- 모든 근이 s-평면의 왼쪽 반면에 있어야 안정

#### 근궤적법(Root Locus)
- 시스템 매개변수 변화에 따른 폐루프 극점의 궤적을 통해 안정성 분석

#### 나이퀴스트 판별법(Nyquist Criterion)
- 주파수 응답을 이용한 안정성 판별
- 개루프 전달함수의 극점과 폐루프 시스템의 안정성 관계 분석

## 10. 실생활 제어 시스템 예시

### 자동차 정속 주행 장치(Cruise Control)
- 제어 목표: 설정된 속도 유지
- 피드백: 현재 속도 센서 측정
- 제어기: 속도 차이에 따라 엔진 출력 조절

### 스마트폰 화면 밝기 자동 조절
- 제어 목표: 적절한 화면 밝기 유지
- 피드백: 주변 조도 센서 측정
- 제어기: 측정된 조도에 따라 화면 밝기 조절

### 드론의 자세 제어
- 제어 목표: 원하는 방향과 높이 유지
- 피드백: 자이로스코프, 가속도계 센서 측정
- 제어기: PID 제어를 통해 각 모터의 출력 조절

## 11. PID 제어기(Proportional-Integral-Derivative Controller)

PID 제어기는 가장 널리 사용되는 제어 알고리즘 중 하나로, 비례(P), 적분(I), 미분(D) 제어의 조합이다.

### 비례 제어(P)
- 현재 오차에 비례하는 제어 출력
- 오차가 클수록 큰 제어 출력 생성
- 정상상태 오차(steady-state error) 발생 가능

### 적분 제어(I)
- 시간에 따른 오차의 누적에 비례하는 제어 출력
- 정상상태 오차 제거에 효과적
- 오버슈트(overshoot) 증가 가능

### 미분 제어(D)
- 오차의 변화율에 비례하는 제어 출력
- 시스템의 응답 속도 향상
- 노이즈에 민감한 단점

### PID 제어기 전달함수
```
C(s) = Kp + Ki/s + Kd·s = Kp + Ki·(1/s) + Kd·s
```
여기서:
- Kp: 비례 이득
- Ki: 적분 이득
- Kd: 미분 이득

## 12. 주파수 응답 분석

주파수 응답은 시스템이 다양한 주파수의 정현파 입력에 어떻게 반응하는지 분석하는 방법이다.

### 보드 선도(Bode Plot)
- 진폭비(크기)와 위상차를 주파수 함수로 표현
- 크기는 dB 단위로 표시
- 주파수 응답 특성 파악에 유용

### 나이퀴스트 선도(Nyquist Plot)
- 복소평면에서 주파수 응답을 표현
- 시스템의 안정성 판별에 유용
- 폐루프 시스템의 안정성을 개루프 전달함수로 판단 가능